<div class="performance-chart">
  <h3 class="chart-title">Performance Globale de la Classe</h3>
  <div class="chart-container">
    <svg [attr.viewBox]="'0 0 ' + viewBoxWidth + ' ' + viewBoxHeight" class="chart-svg">
      <!-- Grid Lines -->
      <g class="grid">
        <line *ngFor="let line of yAxisLines" [attr.x1]="padding" [attr.y1]="line.y" [attr.x2]="viewBoxWidth - padding"
          [attr.y2]="line.y" stroke="#e5e7eb" stroke-dasharray="4" />
        <text *ngFor="let line of yAxisLines" [attr.x]="padding - 10" [attr.y]="line.y" dy="4" text-anchor="end"
          class="axis-label">
          {{ line.value }}
        </text>
      </g>

      <!-- Data Lines & Points -->
      <g *ngFor="let s of series">
        <path [attr.d]="getLinePath(s.data)" fill="none" [attr.stroke]="s.color" stroke-width="3"
          stroke-linecap="round" />

        <!-- Optional: Points on the line -->
        <circle *ngFor="let val of s.data; let i = index" [attr.cx]="xLabelPositions[i].x"
          [attr.cy]="viewBoxHeight - padding - (val * (viewBoxHeight - (padding * 2)) / 100)" r="4"
          [attr.fill]="s.color" stroke="white" stroke-width="2" />
      </g>

      <!-- X Axis Labels -->
      <g class="x-axis">
        <text *ngFor="let label of xLabelPositions" [attr.x]="label.x" [attr.y]="viewBoxHeight - 10"
          text-anchor="middle" class="axis-label">
          {{ label.label }}
        </text>
      </g>
    </svg>

    <div class="chart-legend">
      <div *ngFor="let s of series" class="legend-item">
        <span class="legend-dot" [style.background-color]="s.color"></span>
        <span class="legend-text">{{ s.name }}</span>
      </div>
    </div>
  </div>
</div>